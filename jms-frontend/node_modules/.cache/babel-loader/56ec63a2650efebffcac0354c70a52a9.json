{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Col,Row}from\"react-bootstrap\";import{ALLIANCES}from\"support/ws-additional\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PlayoffRoundRobin=/*#__PURE__*/function(_React$PureComponent){_inherits(PlayoffRoundRobin,_React$PureComponent);var _super=_createSuper(PlayoffRoundRobin);function PlayoffRoundRobin(){_classCallCheck(this,PlayoffRoundRobin);return _super.apply(this,arguments);}_createClass(PlayoffRoundRobin,[{key:\"render\",value:function render(){var _this$props=this.props,gen_record=_this$props.gen_record,next=_this$props.next,dark_mode=_this$props.dark_mode;var alliance_records=[];gen_record.matches.filter(function(m){return m.played;}).forEach(function(m){var red_a=m.red_alliance;var blue_a=m.blue_alliance;alliance_records[red_a]||(alliance_records[red_a]={alliance:red_a,teams:m.red_teams.filter(function(t){return t!=null;}),win:0,loss:0,tie:0});alliance_records[blue_a]||(alliance_records[blue_a]={alliance:blue_a,teams:m.blue_teams.filter(function(t){return t!=null;}),win:0,loss:0,tie:0});if(m.winner==null){// Tie\nalliance_records[red_a].tie+=1;alliance_records[blue_a].tie+=1;}else{var winner=m.winner===\"blue\"?blue_a:red_a;var loser=m.winner===\"blue\"?red_a:blue_a;alliance_records[winner].win+=1;alliance_records[loser].loss+=1;}});var sorted_records=alliance_records.filter(function(t){return t!=null;});sorted_records.sort(function(a,b){return b.win*2+b.tie-a.win*2-a.tie;});return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Col,{className:\"round-robin-matches\",\"data-dark-mode\":dark_mode,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"round-robin-title\",children:\" Round-Robin Semifinals \"})}),gen_record.matches.filter(function(m){return!m.played;}).map(function(m){return/*#__PURE__*/_jsxs(Row,{className:\"round-robin-match\",\"data-next\":(next===null||next===void 0?void 0:next.id)===m.id,children:[/*#__PURE__*/_jsxs(Col,{className:\"round-robin-match-name\",children:[\" \",m.short_name,\" \"]}),ALLIANCES.map(function(alliance){return/*#__PURE__*/_jsx(Col,{className:\"round-robin-alliance\",\"data-alliance\":alliance,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:\"auto\",className:\"round-robin-alliance-num\",children:m[\"\".concat(alliance,\"_alliance\")]}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Row,{children:m[\"\".concat(alliance,\"_teams\")].filter(function(t){return t!=null;}).map(function(t){return/*#__PURE__*/_jsx(Col,{children:t||\"\"});})})})]})});})]},m.id||\"\");})]}),/*#__PURE__*/_jsxs(Col,{className:\"round-robin-standings\",\"data-has-leaderboard\":sorted_records.length>0,\"data-dark-mode\":dark_mode,children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"round-robin-title\",children:\" Leaderboard \"})}),/*#__PURE__*/_jsxs(Row,{className:\"round-robin-standings-title\",children:[/*#__PURE__*/_jsx(Col,{md:1,children:\" # \"}),/*#__PURE__*/_jsx(Col,{md:8,children:\" Alliance \"}),/*#__PURE__*/_jsx(Col,{md:3,children:\" W-L-T \"})]}),sorted_records.map(function(r,i){return/*#__PURE__*/_jsxs(Row,{className:\"round-robin-standings-entry\",children:[/*#__PURE__*/_jsxs(Col,{md:1,children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:i+1}),\" \"]}),/*#__PURE__*/_jsxs(Col,{md:8,children:[\" \",r===null||r===void 0?void 0:r.teams.join(\"-\"),\" \"]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\" \",r===null||r===void 0?void 0:r.win,\"-\",r===null||r===void 0?void 0:r.loss,\"-\",r===null||r===void 0?void 0:r.tie,\" \"]})]});})]})]});}}]);return PlayoffRoundRobin;}(React.PureComponent);export{PlayoffRoundRobin as default};;","map":{"version":3,"names":["React","Col","Row","ALLIANCES","PlayoffRoundRobin","props","gen_record","next","dark_mode","alliance_records","matches","filter","m","played","forEach","red_a","red_alliance","blue_a","blue_alliance","alliance","teams","red_teams","t","win","loss","tie","blue_teams","winner","loser","sorted_records","sort","a","b","map","id","short_name","length","r","i","join","PureComponent"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/components/PlayoffRoundRobin.tsx"],"sourcesContent":["import React from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { SerialisedMatchGeneration, SerializedMatch } from \"ws-schema\";\nimport { ALLIANCES } from \"support/ws-additional\";\nimport _ from \"lodash\";\n\nexport type PlayoffRoundRobinProps = {\n  gen_record: SerialisedMatchGeneration,\n  next?: SerializedMatch,\n  dark_mode?: boolean\n}\n\nexport default class PlayoffRoundRobin extends React.PureComponent<PlayoffRoundRobinProps> {\n  render() {\n    const { gen_record, next, dark_mode } = this.props;\n    let alliance_records: ({ alliance: number, teams: number[], win: number, loss: number, tie: number } | undefined)[] = [];\n\n    gen_record.matches.filter(m => m.played).forEach(m => {\n      let red_a = m.red_alliance!;\n      let blue_a = m.blue_alliance!;\n\n      alliance_records[red_a] ||= { alliance: red_a, teams: m.red_teams.filter(t => t != null) as number[], win: 0, loss: 0, tie: 0 };\n      alliance_records[blue_a] ||= { alliance: blue_a, teams: m.blue_teams.filter(t => t != null) as number[], win: 0, loss: 0, tie: 0 };\n\n      if (m.winner == null) {\n        // Tie\n        alliance_records[red_a]!.tie += 1;\n        alliance_records[blue_a]!.tie += 1;\n      } else {\n        let winner = m.winner === \"blue\" ? blue_a : red_a;\n        let loser = m.winner === \"blue\" ? red_a : blue_a;\n\n        alliance_records[winner]!.win += 1;\n        alliance_records[loser]!.loss += 1;\n      }\n    });\n\n    let sorted_records = alliance_records.filter(t => t != null);\n    sorted_records.sort((a, b) => b!.win * 2 + b!.tie - a!.win * 2 - a!.tie);\n\n    return <React.Fragment>\n      <Col className=\"round-robin-matches\" data-dark-mode={dark_mode}>\n        <Row>\n          <Col className=\"round-robin-title\"> Round-Robin Semifinals </Col>\n        </Row>\n        {\n          gen_record.matches.filter(m => !m.played).map(m => <Row key={m.id || \"\"} className=\"round-robin-match\" data-next={next?.id === m.id}>\n            <Col className=\"round-robin-match-name\"> { m.short_name } </Col>\n            {\n              ALLIANCES.map(alliance => <Col className=\"round-robin-alliance\" data-alliance={alliance}>\n                <Row>\n                  <Col md=\"auto\" className=\"round-robin-alliance-num\">\n                    { m[`${alliance}_alliance`] }\n                  </Col>\n                  <Col>\n                    <Row>\n                      {\n                        m[`${alliance}_teams`].filter(t => t != null).map(t => <Col>\n                          {t || \"\"}\n                        </Col>)\n                      }\n                    </Row>\n                  </Col>\n                </Row>\n              </Col>)\n            }\n          </Row>)\n        }\n      </Col>\n      <Col className=\"round-robin-standings\" data-has-leaderboard={sorted_records.length > 0} data-dark-mode={dark_mode}>\n        <Row>\n          <Col className=\"round-robin-title\"> Leaderboard </Col>\n        </Row>\n        <Row className=\"round-robin-standings-title\">\n          <Col md={1}> # </Col>\n          <Col md={8}> Alliance </Col>\n          <Col md={3}> W-L-T </Col>\n        </Row>\n        {\n          sorted_records.map((r, i) => <Row className=\"round-robin-standings-entry\">\n            <Col md={1}> <strong>{ i + 1 }</strong> </Col>\n            <Col md={8}> { r?.teams.join(\"-\") } </Col>\n            <Col md={3}> { r?.win }-{ r?.loss }-{ r?.tie } </Col>\n          </Row>)\n        }\n      </Col>\n    </React.Fragment>\n  }\n};"],"mappings":"giBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,iBAAzB,CAEA,OAASC,SAAT,KAA0B,uBAA1B,C,2FASqBC,kB,wSACnB,iBAAS,CACP,gBAAwC,KAAKC,KAA7C,CAAQC,UAAR,aAAQA,UAAR,CAAoBC,IAApB,aAAoBA,IAApB,CAA0BC,SAA1B,aAA0BA,SAA1B,CACA,GAAIC,iBAA+G,CAAG,EAAtH,CAEAH,UAAU,CAACI,OAAX,CAAmBC,MAAnB,CAA0B,SAAAC,CAAC,QAAIA,EAAC,CAACC,MAAN,EAA3B,EAAyCC,OAAzC,CAAiD,SAAAF,CAAC,CAAI,CACpD,GAAIG,MAAK,CAAGH,CAAC,CAACI,YAAd,CACA,GAAIC,OAAM,CAAGL,CAAC,CAACM,aAAf,CAEAT,gBAAgB,CAACM,KAAD,CAAhB,GAAAN,gBAAgB,CAACM,KAAD,CAAhB,CAA4B,CAAEI,QAAQ,CAAEJ,KAAZ,CAAmBK,KAAK,CAAER,CAAC,CAACS,SAAF,CAAYV,MAAZ,CAAmB,SAAAW,CAAC,QAAIA,EAAC,EAAI,IAAT,EAApB,CAA1B,CAA0EC,GAAG,CAAE,CAA/E,CAAkFC,IAAI,CAAE,CAAxF,CAA2FC,GAAG,CAAE,CAAhG,CAA5B,EACAhB,gBAAgB,CAACQ,MAAD,CAAhB,GAAAR,gBAAgB,CAACQ,MAAD,CAAhB,CAA6B,CAAEE,QAAQ,CAAEF,MAAZ,CAAoBG,KAAK,CAAER,CAAC,CAACc,UAAF,CAAaf,MAAb,CAAoB,SAAAW,CAAC,QAAIA,EAAC,EAAI,IAAT,EAArB,CAA3B,CAA4EC,GAAG,CAAE,CAAjF,CAAoFC,IAAI,CAAE,CAA1F,CAA6FC,GAAG,CAAE,CAAlG,CAA7B,EAEA,GAAIb,CAAC,CAACe,MAAF,EAAY,IAAhB,CAAsB,CACpB;AACAlB,gBAAgB,CAACM,KAAD,CAAhB,CAAyBU,GAAzB,EAAgC,CAAhC,CACAhB,gBAAgB,CAACQ,MAAD,CAAhB,CAA0BQ,GAA1B,EAAiC,CAAjC,CACD,CAJD,IAIO,CACL,GAAIE,OAAM,CAAGf,CAAC,CAACe,MAAF,GAAa,MAAb,CAAsBV,MAAtB,CAA+BF,KAA5C,CACA,GAAIa,MAAK,CAAGhB,CAAC,CAACe,MAAF,GAAa,MAAb,CAAsBZ,KAAtB,CAA8BE,MAA1C,CAEAR,gBAAgB,CAACkB,MAAD,CAAhB,CAA0BJ,GAA1B,EAAiC,CAAjC,CACAd,gBAAgB,CAACmB,KAAD,CAAhB,CAAyBJ,IAAzB,EAAiC,CAAjC,CACD,CACF,CAlBD,EAoBA,GAAIK,eAAc,CAAGpB,gBAAgB,CAACE,MAAjB,CAAwB,SAAAW,CAAC,QAAIA,EAAC,EAAI,IAAT,EAAzB,CAArB,CACAO,cAAc,CAACC,IAAf,CAAoB,SAACC,CAAD,CAAIC,CAAJ,QAAUA,EAAC,CAAET,GAAH,CAAS,CAAT,CAAaS,CAAC,CAAEP,GAAhB,CAAsBM,CAAC,CAAER,GAAH,CAAS,CAA/B,CAAmCQ,CAAC,CAAEN,GAAhD,EAApB,EAEA,mBAAO,MAAC,KAAD,CAAO,QAAP,yBACL,MAAC,GAAD,EAAK,SAAS,CAAC,qBAAf,CAAqC,iBAAgBjB,SAArD,wBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,SAAS,CAAC,mBAAf,sCADF,EADF,CAKIF,UAAU,CAACI,OAAX,CAAmBC,MAAnB,CAA0B,SAAAC,CAAC,QAAI,CAACA,CAAC,CAACC,MAAP,EAA3B,EAA0CoB,GAA1C,CAA8C,SAAArB,CAAC,qBAAI,MAAC,GAAD,EAAsB,SAAS,CAAC,mBAAhC,CAAoD,YAAW,CAAAL,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAE2B,EAAN,IAAatB,CAAC,CAACsB,EAA9E,wBACjD,MAAC,GAAD,EAAK,SAAS,CAAC,wBAAf,eAA2CtB,CAAC,CAACuB,UAA7C,OADiD,CAG/ChC,SAAS,CAAC8B,GAAV,CAAc,SAAAd,QAAQ,qBAAI,KAAC,GAAD,EAAK,SAAS,CAAC,sBAAf,CAAsC,gBAAeA,QAArD,uBACxB,MAAC,GAAD,yBACE,KAAC,GAAD,EAAK,EAAE,CAAC,MAAR,CAAe,SAAS,CAAC,0BAAzB,UACIP,CAAC,WAAIO,QAAJ,cADL,EADF,cAIE,KAAC,GAAD,wBACE,KAAC,GAAD,WAEIP,CAAC,WAAIO,QAAJ,WAAD,CAAuBR,MAAvB,CAA8B,SAAAW,CAAC,QAAIA,EAAC,EAAI,IAAT,EAA/B,EAA8CW,GAA9C,CAAkD,SAAAX,CAAC,qBAAI,KAAC,GAAD,WACpDA,CAAC,EAAI,EAD+C,EAAJ,EAAnD,CAFJ,EADF,EAJF,GADwB,EAAJ,EAAtB,CAH+C,GAAUV,CAAC,CAACsB,EAAF,EAAQ,EAAlB,CAAJ,EAA/C,CALJ,GADK,cA6BL,MAAC,GAAD,EAAK,SAAS,CAAC,uBAAf,CAAuC,uBAAsBL,cAAc,CAACO,MAAf,CAAwB,CAArF,CAAwF,iBAAgB5B,SAAxG,wBACE,KAAC,GAAD,wBACE,KAAC,GAAD,EAAK,SAAS,CAAC,mBAAf,2BADF,EADF,cAIE,MAAC,GAAD,EAAK,SAAS,CAAC,6BAAf,wBACE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,iBADF,cAEE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBAFF,cAGE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,qBAHF,GAJF,CAUIqB,cAAc,CAACI,GAAf,CAAmB,SAACI,CAAD,CAAIC,CAAJ,qBAAU,MAAC,GAAD,EAAK,SAAS,CAAC,6BAAf,wBAC3B,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,4BAAa,wBAAUA,CAAC,CAAG,CAAd,EAAb,OAD2B,cAE3B,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eAAeD,CAAf,SAAeA,CAAf,iBAAeA,CAAC,CAAEjB,KAAH,CAASmB,IAAT,CAAc,GAAd,CAAf,OAF2B,cAG3B,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eAAeF,CAAf,SAAeA,CAAf,iBAAeA,CAAC,CAAEd,GAAlB,KAA0Bc,CAA1B,SAA0BA,CAA1B,iBAA0BA,CAAC,CAAEb,IAA7B,KAAsCa,CAAtC,SAAsCA,CAAtC,iBAAsCA,CAAC,CAAEZ,GAAzC,OAH2B,GAAV,EAAnB,CAVJ,GA7BK,GAAP,CA+CD,C,+BA3E4CzB,KAAK,CAACwC,a,SAAhCpC,iB,aA4EpB"},"metadata":{},"sourceType":"module"}