{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Button,Col,Container,Form,Row}from\"react-bootstrap\";import{WebsocketComponent}from\"support/ws-component\";import _ from\"lodash\";import{nullIfEmpty}from\"support/strings\";import MatchLogView from\"./MatchLogView\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faCircleNotch,faRotate}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MatchLogs=/*#__PURE__*/function(_WebsocketComponent){_inherits(MatchLogs,_WebsocketComponent);var _super=_createSuper(MatchLogs);function MatchLogs(){var _this;_classCallCheck(this,MatchLogs);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={keys:[],loading:false};_this.componentDidMount=function(){_this.loadKeys();};_this.loadKeys=function(){_this.setState({loading:true},function(){_this.transact({Ticket:{Logs:\"Keys\"}},\"Ticket/Logs/Keys\").then(function(data){return _this.setState({keys:data.msg.reverse(),loading:false});});});};_this.keysFor=function(match){return _this.state.keys.filter(function(k){return k.match_id===match;});};return _this;}_createClass(MatchLogs,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,match_id=_this$state.match_id,team=_this$state.team,loading=_this$state.loading;return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{children:\" Match Logs \"})})}),/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form.Select,{value:match_id||\"\",onChange:function onChange(v){return _this2.setState({match_id:nullIfEmpty(v.target.value)||undefined,team:undefined});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select Match \"}),_.uniq(this.state.keys.map(function(k){return k.match_id;})).map(function(k){return/*#__PURE__*/_jsxs(\"option\",{value:k,children:[\" \",k,\" \"]});})]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form.Select,{value:team||\"\",onChange:function onChange(v){return _this2.setState({team:Number(v.target.value)||undefined});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select Team \"}),this.keysFor(match_id||\"\").map(function(k){return/*#__PURE__*/_jsxs(\"option\",{value:k.team,children:[\" \",k.team,\" \"]});})]})}),/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsxs(Button,{disabled:loading,onClick:this.loadKeys,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:loading?faCircleNotch:faRotate,spin:loading}),\"\\xA0 Refresh\"]})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:match_id==null||team==null?/*#__PURE__*/_jsx(\"h5\",{className:\"text-muted\",children:\" Select a Match and Team to Load Logs \"}):/*#__PURE__*/_jsx(MatchLogView,{autoload:true,match_id:match_id,team:team})})})]});}}]);return MatchLogs;}(WebsocketComponent);export{MatchLogs as default};","map":{"version":3,"names":["Button","Col","Container","Form","Row","WebsocketComponent","_","nullIfEmpty","MatchLogView","FontAwesomeIcon","faCircleNotch","faRotate","MatchLogs","state","keys","loading","componentDidMount","loadKeys","setState","transact","Ticket","Logs","then","data","msg","reverse","keysFor","match","filter","k","match_id","team","v","target","value","undefined","uniq","map","Number"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/monitor/MatchLogs.tsx"],"sourcesContent":["import { Button, Col, Container, Form, Row } from \"react-bootstrap\";\nimport { WebsocketComponent } from \"support/ws-component\";\nimport { MatchStationStatusRecordKey } from \"ws-schema\";\nimport _ from \"lodash\";\nimport { nullIfEmpty } from \"support/strings\";\nimport MatchLogView from \"./MatchLogView\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCircleNotch, faRotate } from \"@fortawesome/free-solid-svg-icons\";\n\ntype MatchLogsState = {\n  keys: MatchStationStatusRecordKey[],\n  match_id?: string,\n  team?: number,\n  loading: boolean,\n};\n\nexport default class MatchLogs extends WebsocketComponent<{}, MatchLogsState> {\n  readonly state: MatchLogsState = { keys: [], loading: false };\n\n  componentDidMount = () => {\n    this.loadKeys();\n  }\n  \n  loadKeys = () => {\n    this.setState({ loading: true }, () => {\n      this.transact<MatchStationStatusRecordKey[]>({\n        Ticket: { Logs: \"Keys\" }\n      }, \"Ticket/Logs/Keys\")\n      .then(data => this.setState({ keys: data.msg.reverse(), loading: false }))\n    })\n  }\n\n  keysFor = (match: string) => {\n    return this.state.keys.filter(k => k.match_id === match);\n  }\n\n  render() {\n    const { match_id, team, loading } = this.state;\n    return <Container>\n      <Row className=\"mb-3\">\n        <Col>\n          <h3> Match Logs </h3>\n        </Col>\n      </Row>\n      <Row className=\"mb-3\">\n        <Col>\n          <Form.Select value={match_id || \"\"} onChange={v => this.setState({ match_id: nullIfEmpty(v.target.value) || undefined, team: undefined })}>\n            <option value=\"\"> Select Match </option>\n            {\n              _.uniq(this.state.keys.map(k => k.match_id)).map(k => <option value={k}> { k } </option>)\n            }\n          </Form.Select>\n        </Col>\n        <Col>\n          <Form.Select value={team || \"\"} onChange={v => this.setState({ team: Number(v.target.value) || undefined })}>\n            <option value=\"\"> Select Team </option>\n            {\n              this.keysFor(match_id || \"\").map(k => <option value={k.team}> { k.team } </option>)\n            }\n          </Form.Select>\n        </Col>\n        <Col md=\"auto\">\n          <Button disabled={loading} onClick={this.loadKeys}>\n            <FontAwesomeIcon icon={loading ? faCircleNotch : faRotate} spin={loading} />\n            &nbsp; Refresh\n          </Button>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n            {\n              (match_id == null || team == null) ? <h5 className=\"text-muted\"> Select a Match and Team to Load Logs </h5>\n                : <MatchLogView autoload match_id={match_id!} team={team!} />\n            }\n        </Col>\n      </Row>\n    </Container>\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}