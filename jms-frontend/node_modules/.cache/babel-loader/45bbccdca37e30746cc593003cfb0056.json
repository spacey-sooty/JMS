{"ast":null,"code":"import{v4 as uuid}from'uuid';// TODO: FTA should persist across tabs - should be in localStorage.\nexport default function resource_id(){var id=sessionStorage.getItem(\"resource_id\");if(id==null){sessionStorage.setItem(\"resource_id\",uuid());}return sessionStorage.getItem(\"resource_id\");}export function resource_id_lock(){// https://stackoverflow.com/questions/56868153/session-storage-not-being-cleared-when-duplicating-tabs\nwindow.addEventListener('beforeunload',function(){return sessionStorage.removeItem(\"__lock\");});if(sessionStorage.getItem(\"__lock\")){sessionStorage.clear();console.warn(\"Found a lock in session storage - tab must have been duplicated. Clearing storage.\");}sessionStorage.setItem('__lock','true');}export function get_fta_key(){return localStorage.getItem(\"fta_key\");}export function set_fta_key(key){localStorage.setItem(\"fta_key\",key);}export function clear_fta_key(){localStorage.removeItem(\"fta_key\");}","map":{"version":3,"names":["v4","uuid","resource_id","id","sessionStorage","getItem","setItem","resource_id_lock","window","addEventListener","removeItem","clear","console","warn","get_fta_key","localStorage","set_fta_key","key","clear_fta_key"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/support/resourceid.ts"],"sourcesContent":["import { v4 as uuid } from 'uuid';\n\n// TODO: FTA should persist across tabs - should be in localStorage.\n\nexport default function resource_id() {\n  const id = sessionStorage.getItem(\"resource_id\");\n  if (id == null) {\n    sessionStorage.setItem(\"resource_id\", uuid());\n  }\n  return sessionStorage.getItem(\"resource_id\")!;\n}\n\nexport function resource_id_lock() {\n  // https://stackoverflow.com/questions/56868153/session-storage-not-being-cleared-when-duplicating-tabs\n  window.addEventListener('beforeunload', () => sessionStorage.removeItem(\"__lock\"));\n  if (sessionStorage.getItem(\"__lock\")) {\n    sessionStorage.clear();\n    console.warn(\"Found a lock in session storage - tab must have been duplicated. Clearing storage.\");\n  }\n  sessionStorage.setItem('__lock', 'true');\n}\n\nexport function get_fta_key() {\n  return localStorage.getItem(\"fta_key\")\n}\n\nexport function set_fta_key(key: string) {\n  localStorage.setItem(\"fta_key\", key);\n}\n\nexport function clear_fta_key() {\n  localStorage.removeItem(\"fta_key\");\n}"],"mappings":"AAAA,OAASA,EAAE,GAAIC,KAAf,KAA2B,MAA3B,CAEA;AAEA,cAAe,SAASC,YAAT,EAAuB,CACpC,GAAMC,GAAE,CAAGC,cAAc,CAACC,OAAf,CAAuB,aAAvB,CAAX,CACA,GAAIF,EAAE,EAAI,IAAV,CAAgB,CACdC,cAAc,CAACE,OAAf,CAAuB,aAAvB,CAAsCL,IAAI,EAA1C,EACD,CACD,MAAOG,eAAc,CAACC,OAAf,CAAuB,aAAvB,CAAP,CACD,CAED,MAAO,SAASE,iBAAT,EAA4B,CACjC;AACAC,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,iBAAML,eAAc,CAACM,UAAf,CAA0B,QAA1B,CAAN,EAAxC,EACA,GAAIN,cAAc,CAACC,OAAf,CAAuB,QAAvB,CAAJ,CAAsC,CACpCD,cAAc,CAACO,KAAf,GACAC,OAAO,CAACC,IAAR,CAAa,oFAAb,EACD,CACDT,cAAc,CAACE,OAAf,CAAuB,QAAvB,CAAiC,MAAjC,EACD,CAED,MAAO,SAASQ,YAAT,EAAuB,CAC5B,MAAOC,aAAY,CAACV,OAAb,CAAqB,SAArB,CAAP,CACD,CAED,MAAO,SAASW,YAAT,CAAqBC,GAArB,CAAkC,CACvCF,YAAY,CAACT,OAAb,CAAqB,SAArB,CAAgCW,GAAhC,EACD,CAED,MAAO,SAASC,cAAT,EAAyB,CAC9BH,YAAY,CAACL,UAAb,CAAwB,SAAxB,EACD"},"metadata":{},"sourceType":"module"}