{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{CSSTransition}from\"react-transition-group\";import{WebsocketComponent}from\"support/ws-component\";import{jsx as _jsx}from\"react/jsx-runtime\";var BaseAudienceScene=/*#__PURE__*/function(_WebsocketComponent){_inherits(BaseAudienceScene,_WebsocketComponent);var _super=_createSuper(BaseAudienceScene);function BaseAudienceScene(){var _this;_classCallCheck(this,BaseAudienceScene);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.show=void 0;_this.onShow=function(){};_this.onHide=function(){};_this.onUpdate=function(prevProps,prevState){};_this.componentDidUpdate=function(prevProps,prevState){if(prevProps.props!=null&&_this.props.props==null)_this.onShow();if(!prevProps.props==null&&_this.props.props!=null)_this.onHide();_this.onUpdate(prevProps,prevState);};_this.render=function(){// const { props, details, ...others } = this.props;\nreturn/*#__PURE__*/_jsx(CSSTransition,{in:_this.state._show,onExited:function onExited(){_this.setState({_props:undefined});},classNames:\"audience-scene-anim\",timeout:500,children:/*#__PURE__*/_jsx(\"div\",{className:\"audience-scene-anim\",children:_this.state._props!=null?_this.show(_this.state._props):undefined})},_this.constructor.name);{/* {\n        props != null ? this.show(props!) : <React.Fragment />\n      } */}};return _this;}_createClass(BaseAudienceScene,null,[{key:\"getDerivedStateFromProps\",value:// Latch previous props so the animation can take place\nfunction getDerivedStateFromProps(nextProps,prevState){if(nextProps.props==null&&prevState._props!=null){return{_show:false};}else{return{_show:nextProps.props!=null,_props:nextProps.props};}}}]);return BaseAudienceScene;}(WebsocketComponent);export{BaseAudienceScene as default};export var AudienceSceneField=/*#__PURE__*/function(_BaseAudienceScene){_inherits(AudienceSceneField,_BaseAudienceScene);var _super2=_createSuper(AudienceSceneField);function AudienceSceneField(){var _this2;_classCallCheck(this,AudienceSceneField);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.show=function(){return/*#__PURE__*/_jsx(\"div\",{className:\"audience-field\"});};return _this2;}return _createClass(AudienceSceneField);}(BaseAudienceScene);","map":{"version":3,"names":["React","CSSTransition","WebsocketComponent","BaseAudienceScene","state","show","onShow","onHide","onUpdate","prevProps","prevState","componentDidUpdate","props","render","_show","setState","_props","undefined","constructor","name","nextProps","AudienceSceneField"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/audience/BaseAudienceScene.tsx"],"sourcesContent":["import React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { WebsocketComponent } from \"support/ws-component\";\nimport { EventDetails } from \"ws-schema\";\n\nexport type AudienceSceneBaseProps<T> = {\n  details: EventDetails,\n  props?: T\n};\n\nexport type AudienceSceneBaseState<P, S> = {\n  _props?: P,\n  _show?: boolean\n} & S;\n\nexport default abstract class BaseAudienceScene<P={}, S={}> extends WebsocketComponent<AudienceSceneBaseProps<P>, AudienceSceneBaseState<P, S>> {\n  readonly state: AudienceSceneBaseState<P, S> = {} as any;\n  \n  abstract show: (props: P) => React.ReactNode;\n  onShow = () => {};\n  onHide = () => {};\n  onUpdate = (prevProps: AudienceSceneBaseProps<P>, prevState: S) => {};\n\n  // Latch previous props so the animation can take place\n  static getDerivedStateFromProps(nextProps: AudienceSceneBaseProps<any>, prevState: AudienceSceneBaseState<any, any>) {\n    if (nextProps.props == null && prevState._props != null) {\n      return { _show: false };\n    } else {\n      return { _show: nextProps.props != null, _props: nextProps.props };\n    }\n  }\n\n  componentDidUpdate = (prevProps: AudienceSceneBaseProps<P>, prevState: S) => {\n    if (prevProps.props != null && this.props.props == null) \n      this.onShow();\n    if (!prevProps.props == null && this.props.props != null)\n      this.onHide();\n    this.onUpdate(prevProps, prevState);\n  }\n  \n  render = () => {\n    // const { props, details, ...others } = this.props;\n\n    return <CSSTransition\n      key={this.constructor.name}\n      in={this.state._show}\n      onExited={() => { this.setState({ _props: undefined }) }}\n      classNames=\"audience-scene-anim\"\n      timeout={500}\n    >\n      <div className=\"audience-scene-anim\">\n        { this.state._props != null ? this.show(this.state._props!) : undefined }\n        {/* { props != null ? this.show(props!) : ( this.lastProps != null ? this.show(this.lastProps!) : <React.Fragment /> ) } */}\n      </div>\n    </CSSTransition>\n      {/* {\n        props != null ? this.show(props!) : <React.Fragment />\n      } */}\n  }\n}\n\nexport class AudienceSceneField extends BaseAudienceScene {\n  show = () => {\n    return <div className=\"audience-field\" />\n  }\n}"],"mappings":"giBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,kBAAT,KAAmC,sBAAnC,C,8CAa8BC,kB,yXACnBC,K,CAAsC,E,OAEtCC,I,cACTC,M,CAAS,UAAM,CAAE,C,OACjBC,M,CAAS,UAAM,CAAE,C,OACjBC,Q,CAAW,SAACC,SAAD,CAAuCC,SAAvC,CAAwD,CAAE,C,OAWrEC,kB,CAAqB,SAACF,SAAD,CAAuCC,SAAvC,CAAwD,CAC3E,GAAID,SAAS,CAACG,KAAV,EAAmB,IAAnB,EAA2B,MAAKA,KAAL,CAAWA,KAAX,EAAoB,IAAnD,CACE,MAAKN,MAAL,GACF,GAAI,CAACG,SAAS,CAACG,KAAX,EAAoB,IAApB,EAA4B,MAAKA,KAAL,CAAWA,KAAX,EAAoB,IAApD,CACE,MAAKL,MAAL,GACF,MAAKC,QAAL,CAAcC,SAAd,CAAyBC,SAAzB,EACD,C,OAEDG,M,CAAS,UAAM,CACb;AAEA,mBAAO,KAAC,aAAD,EAEL,EAAE,CAAE,MAAKT,KAAL,CAAWU,KAFV,CAGL,QAAQ,CAAE,mBAAM,CAAE,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAEC,SAAV,CAAd,EAAsC,CAHnD,CAIL,UAAU,CAAC,qBAJN,CAKL,OAAO,CAAE,GALJ,uBAOL,YAAK,SAAS,CAAC,qBAAf,UACI,MAAKb,KAAL,CAAWY,MAAX,EAAqB,IAArB,CAA4B,MAAKX,IAAL,CAAU,MAAKD,KAAL,CAAWY,MAArB,CAA5B,CAA4DC,SADhE,EAPK,EACA,MAAKC,WAAL,CAAiBC,IADjB,CAAP,CAYE,CAAC;AACP;AACA,UAAW,CACR,C,0FAnCD;AACA,kCAAgCC,SAAhC,CAAwEV,SAAxE,CAAqH,CACnH,GAAIU,SAAS,CAACR,KAAV,EAAmB,IAAnB,EAA2BF,SAAS,CAACM,MAAV,EAAoB,IAAnD,CAAyD,CACvD,MAAO,CAAEF,KAAK,CAAE,KAAT,CAAP,CACD,CAFD,IAEO,CACL,MAAO,CAAEA,KAAK,CAAEM,SAAS,CAACR,KAAV,EAAmB,IAA5B,CAAkCI,MAAM,CAAEI,SAAS,CAACR,KAApD,CAAP,CACD,CACF,C,+BAfiEV,kB,SAAtCC,iB,aA8C9B,UAAakB,mBAAb,yYACEhB,IADF,CACS,UAAM,CACX,mBAAO,YAAK,SAAS,CAAC,gBAAf,EAAP,CACD,CAHH,0DAAwCF,iBAAxC"},"metadata":{},"sourceType":"module"}