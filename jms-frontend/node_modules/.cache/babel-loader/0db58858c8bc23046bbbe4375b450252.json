{"ast":null,"code":"import _toConsumableArray from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{faInfoCircle,faTimes}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import BufferedFormControl from\"components/elements/BufferedFormControl\";import{Button,Col,Form,Row}from\"react-bootstrap\";import{nullIfEmpty}from\"support/strings\";import{WebsocketComponent}from\"support/ws-component\";import{EventWizardPageContent}from\"./EventWizard\";import{SketchPicker}from'react-color';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfigureEvent=/*#__PURE__*/function(_WebsocketComponent){_inherits(ConfigureEvent,_WebsocketComponent);var _super=_createSuper(ConfigureEvent);function ConfigureEvent(){var _this;_classCallCheck(this,ConfigureEvent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={details:{webcasts:[],av_event_colour:\"#fff\",av_chroma_key:\"#fff\"}};_this.componentDidMount=function(){return _this.handles=[_this.listen(\"Event/Details/Current\",\"details\")];};_this.changeEventDetails=function(changes){var details=_this.state.details;_this.send({Event:{Details:{Update:_objectSpread(_objectSpread({},details),changes)}}});};_this.submitNewWebcast=function(webcast){_this.changeEventDetails({webcasts:[].concat(_toConsumableArray(_this.state.details.webcasts),[webcast])});};_this.deleteWebcast=function(i){var webcasts=_this.state.details.webcasts;webcasts.splice(i,1);_this.changeEventDetails({webcasts:webcasts});};return _this;}_createClass(ConfigureEvent,[{key:\"render\",value:function render(){var _this$state$details,_this2=this,_details$webcasts;var details=this.state.details;return/*#__PURE__*/_jsxs(EventWizardPageContent,{tabLabel:\"Configure Event Details\",attention:!((_this$state$details=this.state.details)!==null&&_this$state$details!==void 0&&_this$state$details.event_name),children:[/*#__PURE__*/_jsx(\"h4\",{children:\" Configure Event Details \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\"Event Code \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"(Optional)\"})]}),/*#__PURE__*/_jsx(BufferedFormControl,{type:\"text\",placeholder:\"2022myevent\",value:details.code||\"\",onUpdate:function onUpdate(v){return _this2.changeEventDetails({code:nullIfEmpty(String(v))});}}),/*#__PURE__*/_jsxs(Form.Text,{className:\"text-muted\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faInfoCircle}),\" The event code is usually provided by \",/*#__PURE__*/_jsx(\"i\",{children:\"FIRST\"})]})]}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Event Name\"}),/*#__PURE__*/_jsx(BufferedFormControl,{type:\"text\",placeholder:\"My Really Groovy Robotics Event\",value:details.event_name||\"\",onUpdate:function onUpdate(v){return _this2.changeEventDetails({event_name:nullIfEmpty(String(v))});}})]})]}),/*#__PURE__*/_jsx(Row,{className:\"my-3\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\" Webcast URLs (TBA) \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"(Optional)\"}),\" \"]}),/*#__PURE__*/_jsx(BufferedFormControl,{type:\"text\",placeholder:\"New Webcast URL, e.g. https://www.youtube.com/watch?v=dQw4w9WgXcQ\",value:\"\",onUpdate:function onUpdate(v){return _this2.submitNewWebcast(String(v));},resetOnEnter:true}),(_details$webcasts=details.webcasts)===null||_details$webcasts===void 0?void 0:_details$webcasts.map(function(wc,i){return/*#__PURE__*/_jsxs(Row,{className:\"my-2\",children:[/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsxs(Button,{size:\"sm\",variant:\"danger\",onClick:function onClick(){return _this2.deleteWebcast(i);},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes}),\" \\xA0 Delete\"]})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"a\",{href:wc,target:\"_blank\",children:wc})})]},i);})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\" A/V Setup \"}),/*#__PURE__*/_jsxs(Row,{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(Col,{md:\"auto\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\" Event Colour \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"(Audience Display)\"}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SketchPicker,{disableAlpha:true,presetColors:[\"#e9ab01\",\"#1f5fb9\",\"#901fb9\"],color:details.av_event_colour,onChangeComplete:function onChangeComplete(c){return _this2.changeEventDetails({av_event_colour:c.hex});}})]}),/*#__PURE__*/_jsxs(Col,{md:\"auto\",children:[/*#__PURE__*/_jsxs(Form.Label,{children:[\" Chroma Key \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"(Background)\"}),\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SketchPicker,{disableAlpha:true,presetColors:[\"#000\",\"#f0f\",\"#0f0\",\"#333\"],color:details.av_chroma_key,onChangeComplete:function onChangeComplete(c){return _this2.changeEventDetails({av_chroma_key:c.hex});}})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faInfoCircle}),\" \\xA0 If you're using OBS, you can use a \\\"Browser Source\\\" with the following custom CSS to make the window transparent instead of relying on a chroma key. This will also improve the look of fade transitions.\",/*#__PURE__*/_jsx(\"pre\",{children:\".audience-root { --chroma-key-colour: rgba(0,0,0,0) !important; }\\nbody { background: rgba(0,0,0,0); }\"})]})]})]});}}]);return ConfigureEvent;}(WebsocketComponent);export{ConfigureEvent as default};","map":{"version":3,"names":["faInfoCircle","faTimes","FontAwesomeIcon","BufferedFormControl","Button","Col","Form","Row","nullIfEmpty","WebsocketComponent","EventWizardPageContent","SketchPicker","ConfigureEvent","state","details","webcasts","av_event_colour","av_chroma_key","componentDidMount","handles","listen","changeEventDetails","changes","send","Event","Details","Update","submitNewWebcast","webcast","deleteWebcast","i","splice","event_name","code","v","String","map","wc","c","hex"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/wizard/ConfigureEvent.tsx"],"sourcesContent":["import { faInfoCircle, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BufferedFormControl from \"components/elements/BufferedFormControl\";\nimport { Button, Col, Form, Row } from \"react-bootstrap\";\nimport { nullIfEmpty } from \"support/strings\";\nimport { WebsocketComponent } from \"support/ws-component\";\nimport { EventDetails } from \"ws-schema\";\nimport { EventWizardPageContent } from \"./EventWizard\";\nimport { SketchPicker } from 'react-color';\n\ntype ConfigureEventState = {\n  details: EventDetails\n}\n\nexport default class ConfigureEvent extends WebsocketComponent<{ }, ConfigureEventState> {\n  readonly state: ConfigureEventState = { details: { webcasts: [], av_event_colour: \"#fff\", av_chroma_key: \"#fff\" } };\n\n  componentDidMount = () => this.handles = [\n    this.listen(\"Event/Details/Current\", \"details\")\n  ]\n\n  changeEventDetails = (changes: Partial<EventDetails>) => {\n    let details = this.state.details;\n    this.send({ Event: { Details: { Update: { ...details, ...changes } } } });\n  }\n\n  submitNewWebcast = (webcast: string) => {\n    this.changeEventDetails({\n      webcasts: [ ...this.state.details.webcasts, webcast ]\n    });\n  }\n\n  deleteWebcast = (i: number) => {\n    let webcasts = this.state.details.webcasts;\n    webcasts.splice(i, 1);\n    this.changeEventDetails({\n      webcasts: webcasts\n    });\n  }\n\n  render() {\n    let { details } = this.state;\n    return <EventWizardPageContent tabLabel=\"Configure Event Details\" attention={!this.state.details?.event_name}>\n      <h4> Configure Event Details </h4>\n      <br />\n\n      <Form>\n        <Row>\n          <Col md={4}>\n            <Form.Label>Event Code <span className=\"text-muted\">(Optional)</span></Form.Label>\n            <BufferedFormControl \n              type=\"text\"\n              placeholder=\"2022myevent\"\n              value={details.code || \"\"}\n              onUpdate={v => this.changeEventDetails({ code: nullIfEmpty(String(v)) })}\n            />\n            <Form.Text className=\"text-muted\">\n              <FontAwesomeIcon icon={faInfoCircle} /> The event code is usually provided by <i>FIRST</i>\n            </Form.Text>\n          </Col>\n          <Col>\n            <Form.Label>Event Name</Form.Label>\n            <BufferedFormControl\n              type=\"text\"\n              placeholder=\"My Really Groovy Robotics Event\"\n              value={details.event_name || \"\"}\n              onUpdate={v => this.changeEventDetails({ event_name: nullIfEmpty(String(v)) })}\n            />\n          </Col>\n        </Row>\n        <Row className=\"my-3\">\n          <Col>\n            <Form.Label> Webcast URLs (TBA) <span className=\"text-muted\">(Optional)</span> </Form.Label>\n            <BufferedFormControl\n              type=\"text\"\n              placeholder=\"New Webcast URL, e.g. https://www.youtube.com/watch?v=dQw4w9WgXcQ\"\n              value=\"\"\n              onUpdate={ v => this.submitNewWebcast(String(v)) }\n              resetOnEnter\n            />\n            {\n              details.webcasts?.map((wc, i) => <Row key={i} className=\"my-2\">\n                <Col md=\"auto\">\n                  <Button\n                    size=\"sm\"\n                    variant=\"danger\"\n                    onClick={() => this.deleteWebcast(i)}\n                  >\n                    <FontAwesomeIcon icon={faTimes} /> &nbsp; Delete\n                  </Button>\n                </Col>\n                <Col>\n                  <a href={wc} target=\"_blank\">{ wc }</a>\n                </Col>\n              </Row>)\n            }\n          </Col>\n        </Row>\n        <br />\n        <h4> A/V Setup </h4>\n        <Row className=\"mt-2\">\n          <Col md=\"auto\">\n            <Form.Label> Event Colour <span className=\"text-muted\">(Audience Display)</span> </Form.Label>\n            <br />\n            <SketchPicker\n              disableAlpha={true}\n              presetColors={[\"#e9ab01\", \"#1f5fb9\", \"#901fb9\"]}\n              color={ details.av_event_colour }\n              onChangeComplete={ c => this.changeEventDetails({ av_event_colour: c.hex }) }\n            />\n          </Col>\n          <Col md=\"auto\">\n            <Form.Label> Chroma Key <span className=\"text-muted\">(Background)</span> </Form.Label>\n            <br />\n            <SketchPicker\n              disableAlpha={true}\n              presetColors={[\"#000\", \"#f0f\", \"#0f0\", \"#333\"]}\n              color={ details.av_chroma_key }\n              onChangeComplete={ c => this.changeEventDetails({ av_chroma_key: c.hex }) }\n            />\n          </Col>\n        </Row>\n        <br />\n        <p className=\"text-muted\"> \n          <FontAwesomeIcon icon={faInfoCircle} /> &nbsp; \n          If you're using OBS, you can use a \"Browser Source\" with the following custom CSS to make the window transparent instead of relying \n          on a chroma key. This will also improve the look of fade transitions.\n          <pre>\n            {`.audience-root { --chroma-key-colour: rgba(0,0,0,0) !important; }\\nbody { background: rgba(0,0,0,0); }`}\n          </pre>\n        </p>\n\n      </Form>\n    </EventWizardPageContent>\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}