{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Card,Col,Row}from\"react-bootstrap\";import{withVal}from\"support/util\";import{ALLIANCES}from\"support/ws-additional\";import AudienceCard from\"./AudienceCard\";import BaseAudienceScene from\"./BaseAudienceScene\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var derivedRenderer=function derivedRenderer(dr){return function(cb){return cb(dr);};};var DERIVED_RENDER=[derivedRenderer({key:\"mobility_points\",name:\"MOBILITY POINTS\",render:function render(v){return v;}}),derivedRenderer({key:\"auto_docked_points\",name:\"AUTO DOCK POINTS\",render:function render(v){return v;}}),derivedRenderer({key:\"community_points\",name:\"COMMUNITY POINTS\",render:function render(v){return v.auto+v.teleop;}}),derivedRenderer({key:\"link_points\",name:\"LINK POINTS\",render:function render(v){return v;}}),derivedRenderer({key:\"endgame_points\",name:\"ENDGAME\",render:function render(v){return v;}}),derivedRenderer({key:\"penalty_score\",name:\"OPPONENT PENALTY\",render:function render(v){return v;}})];var AllianceResult=/*#__PURE__*/function(_React$PureComponent){_inherits(AllianceResult,_React$PureComponent);var _super=_createSuper(AllianceResult);function AllianceResult(){_classCallCheck(this,AllianceResult);return _super.apply(this,arguments);}_createClass(AllianceResult,[{key:\"render\",value:function render(){var _this$props=this.props,reverse=_this$props.reverse,alliance=_this$props.alliance,score=_this$props.score,winner=_this$props.winner,teams=_this$props.teams,has_rp=_this$props.has_rp;var top=[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Row,{className:\"teams flex-wrap\",children:teams.map(function(t){return/*#__PURE__*/_jsx(Col,{children:t});})})}),/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alliance-score\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"total\",children:score.derived.total_score})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"win-status\",children:winner?winner===alliance?\"WIN\":\"\":\"TIE\"})})]})})];var bottom=[/*#__PURE__*/_jsx(Col,{className:\"breakdown\",\"data-alliance\":alliance,children:DERIVED_RENDER.map(function(dr){return/*#__PURE__*/_jsxs(Row,{className:\"grow\",children:[/*#__PURE__*/_jsx(Col,{children:dr(function(dr){return dr.name;})}),/*#__PURE__*/_jsx(Col,{md:\"auto\",children:dr(function(dr){return dr.render(score.derived[dr.key]);})})]});})}),withVal((has_rp||undefined)&&score.derived.total_rp,function(rp){return/*#__PURE__*/_jsx(Col,{md:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alliance-rp\",children:[rp,\" RP\"]})});})];return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-3\",children:[\" \",reverse?top.reverse():top,\" \"]}),/*#__PURE__*/_jsxs(Row,{className:\"grow\",children:[\" \",reverse?bottom.reverse():bottom,\" \"]})]});}}]);return AllianceResult;}(React.PureComponent);var AudienceSceneMatchResults=/*#__PURE__*/function(_BaseAudienceScene){_inherits(AudienceSceneMatchResults,_BaseAudienceScene);var _super2=_createSuper(AudienceSceneMatchResults);function AudienceSceneMatchResults(){var _this;_classCallCheck(this,AudienceSceneMatchResults);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super2.call.apply(_super2,[this].concat(args));_this.show=function(props){var match=props.match;return/*#__PURE__*/_jsxs(AudienceCard,{event_name:_this.props.details.event_name,className:\"audience-results\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"audience-card-title\",md:\"auto\",children:match.name}),/*#__PURE__*/_jsx(Col,{className:\"preview-text\",children:\"results\"})]}),/*#__PURE__*/_jsx(Row,{className:\"results\",children:ALLIANCES.map(function(alliance){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{\"data-alliance\":alliance,children:[withVal(match[\"\".concat(alliance,\"_alliance\")],function(a){return/*#__PURE__*/_jsxs(Card.Header,{children:[\"Alliance \",a]});}),withVal(match.full_score,function(score){return/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(AllianceResult,{reverse:alliance===\"blue\",alliance:alliance,score:score[alliance],winner:match.winner,teams:match[\"\".concat(alliance,\"_teams\")],has_rp:match.match_type===\"Qualification\"})});})]})});})})]});};return _this;}return _createClass(AudienceSceneMatchResults);}(BaseAudienceScene);export{AudienceSceneMatchResults as default};","map":{"version":3,"names":["React","Card","Col","Row","withVal","ALLIANCES","AudienceCard","BaseAudienceScene","derivedRenderer","dr","cb","DERIVED_RENDER","key","name","render","v","auto","teleop","AllianceResult","props","reverse","alliance","score","winner","teams","has_rp","top","map","t","derived","total_score","bottom","undefined","total_rp","rp","PureComponent","AudienceSceneMatchResults","show","match","details","event_name","a","full_score","match_type"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/audience/MatchResults.tsx"],"sourcesContent":["import React from \"react\";\nimport { Card, Col, Row } from \"react-bootstrap\";\nimport { withVal } from \"support/util\";\nimport { ALLIANCES } from \"support/ws-additional\";\nimport { Alliance, DerivedScore, SerializedMatch, SnapshotScore } from \"ws-schema\";\nimport AudienceCard from \"./AudienceCard\";\nimport BaseAudienceScene from \"./BaseAudienceScene\";\n\ntype DerivedRenderer<K extends keyof DerivedScore> = { key: K, name: string, render: (v: DerivedScore[K]) => number };\n// Existential type hack - thanks https://stackoverflow.com/questions/65129070/defining-an-array-of-differing-generic-types-in-typescript\ntype SomeDerivedRenderer = <R>(cb: <T extends keyof DerivedScore>(dr: DerivedRenderer<T>) => R) => R;\nconst derivedRenderer = <T extends keyof DerivedScore,>(dr: DerivedRenderer<T>): SomeDerivedRenderer => cb => cb(dr);\n\nconst DERIVED_RENDER: SomeDerivedRenderer[] = [\n  derivedRenderer({\n    key: \"mobility_points\",\n    name: \"MOBILITY POINTS\",\n    render: v => v,\n  }),\n  derivedRenderer({\n    key: \"auto_docked_points\",\n    name: \"AUTO DOCK POINTS\",\n    render: v => v,\n  }),\n  derivedRenderer({\n    key: \"community_points\",\n    name: \"COMMUNITY POINTS\",\n    render: v => (v.auto + v.teleop)\n  }),\n  derivedRenderer({\n    key: \"link_points\",\n    name: \"LINK POINTS\",\n    render: v => v\n  }),\n  derivedRenderer({\n    key: \"endgame_points\",\n    name: \"ENDGAME\",\n    render: v => v\n  }),\n  derivedRenderer({\n    key: \"penalty_score\",\n    name: \"OPPONENT PENALTY\",\n    render: v => v\n  })\n];\n\ntype AllianceResultProps = {\n  reverse?: boolean,\n  alliance: Alliance,\n  score: SnapshotScore,\n  winner?: Alliance | null,\n  teams: (number | null)[],\n  has_rp: boolean\n};\n\nclass AllianceResult extends React.PureComponent<AllianceResultProps> {\n  render() {\n    const { reverse, alliance, score, winner, teams, has_rp } = this.props;\n\n    let top = [\n      <Col>\n        <Row className=\"teams flex-wrap\">\n          {\n            teams.map(t => <Col>\n              { t }\n            </Col>)\n          }\n        </Row>\n      </Col>,\n      <Col md=\"auto\">\n        <div className=\"alliance-score\">\n          <Row>\n            <Col className=\"total\"> \n              { score.derived.total_score }\n            </Col>\n          </Row>\n          <Row>\n            <Col className=\"win-status\">\n              {\n                winner ? (winner === alliance ? \"WIN\" : \"\") : \"TIE\"\n              }\n            </Col> \n          </Row>\n        </div>\n      </Col>\n    ];\n\n    let bottom = [\n      <Col className=\"breakdown\" data-alliance={alliance}>\n        {\n          DERIVED_RENDER.map(dr => <Row className=\"grow\">\n            <Col>\n              { dr(dr => dr.name) }\n            </Col>\n            <Col md=\"auto\">\n              { dr(dr => dr.render(score.derived[dr.key])) }\n            </Col>\n          </Row>)\n        }\n      </Col>,\n      withVal((has_rp || undefined) && (score.derived.total_rp), (rp) => <Col md=\"auto\">\n        <div className=\"alliance-rp\">\n          { rp } RP\n        </div>\n      </Col>)\n    ];\n\n    return <React.Fragment>\n      <Row className=\"mb-3\"> { reverse ? top.reverse() : top } </Row>\n      <Row className=\"grow\"> { reverse ? bottom.reverse() : bottom } </Row>\n    </React.Fragment>\n  }\n}\n\ntype AudienceSceneMatchResultsProps = {\n  match: SerializedMatch\n};\n\nexport default class AudienceSceneMatchResults extends BaseAudienceScene<AudienceSceneMatchResultsProps> {\n  show = (props: AudienceSceneMatchResultsProps) => {\n    const { match } = props;\n\n    return <AudienceCard event_name={this.props.details.event_name} className=\"audience-results\">\n      <Row>\n        <Col className=\"audience-card-title\" md=\"auto\">\n          { match.name }\n        </Col>\n        <Col className=\"preview-text\">\n          results\n        </Col>\n      </Row>\n\n      <Row className=\"results\">\n        {\n          ALLIANCES.map(alliance => <Col>\n            <Card data-alliance={alliance}>\n              {\n                withVal(match[`${alliance}_alliance`], a => <Card.Header>\n                  Alliance { a }\n                </Card.Header>)\n              }\n              {\n                withVal(match.full_score, score =>\n                  <Card.Body>\n                    <AllianceResult\n                      reverse={alliance === \"blue\"}\n                      alliance={alliance}\n                      score={score[alliance]}\n                      winner={match.winner}\n                      teams={match[`${alliance}_teams`]} \n                      has_rp={match.match_type === \"Qualification\"}\n                    />\n                  </Card.Body>\n                )\n              }\n            </Card>\n          </Col>)\n        }\n      </Row>\n    </AudienceCard>\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}