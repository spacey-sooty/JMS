{"ast":null,"code":"import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from\"react\";import{Card,Col,Row}from\"react-bootstrap\";import{withVal}from\"support/util\";import{ALLIANCES}from\"support/ws-additional\";import AudienceCard from\"./AudienceCard\";import BaseAudienceScene from\"./BaseAudienceScene\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AudienceSceneMatchPreview=/*#__PURE__*/function(_BaseAudienceScene){_inherits(AudienceSceneMatchPreview,_BaseAudienceScene);var _super=_createSuper(AudienceSceneMatchPreview);function AudienceSceneMatchPreview(){var _this;_classCallCheck(this,AudienceSceneMatchPreview);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={stations:[],teams:[],rankings:[]};_this.componentDidMount=function(){return _this.handles=[_this.listen(\"Arena/Alliance/CurrentStations\",\"stations\"),_this.listen(\"Arena/Match/Current\",\"match\"),_this.listen(\"Event/Team/CurrentAll\",\"teams\"),_this.listen(\"Event/Ranking/CurrentAll\",\"rankings\")];};_this.renderAllianceTeams=function(colour){var _this$state=_this.state,stations=_this$state.stations,teams=_this$state.teams,rankings=_this$state.rankings;return stations.filter(function(s){return s.station.alliance==colour;}).map(function(s){return withVal(s.team,function(){return/*#__PURE__*/_jsxs(Row,{className:\"team\",children:[/*#__PURE__*/_jsx(Col,{className:\"team-number\",sm:3,children:s.team}),/*#__PURE__*/_jsx(Col,{className:\"team-name\",children:withVal(teams.find(function(t){return t.id==s.team;}),function(t){return/*#__PURE__*/_jsxs(React.Fragment,{children:[t.name||t.affiliation,withVal(t.affiliation,function(a){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"span\",{className:\"affiliation\",children:t.affiliation})});})]});})}),/*#__PURE__*/_jsx(Col,{className:\"team-rank\",sm:\"auto\",children:withVal(rankings.findIndex(function(r){return r.team==s.team;})+1||undefined,function(r){return\"#\".concat(r);})})]});});});};_this.show=function(){var match=_this.state.match;if(match==null)return/*#__PURE__*/_jsx(\"div\",{className:\"audience-field\"});else return/*#__PURE__*/_jsxs(AudienceCard,{event_name:_this.props.details.event_name,className:\"audience-preview\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"audience-card-title\",md:\"auto\",children:match.match_meta.name}),/*#__PURE__*/_jsx(Col,{className:\"preview-text\",children:\"coming up\"})]}),/*#__PURE__*/_jsx(Row,{className:\"match-teams\",children:ALLIANCES.map(function(colour){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Card,{\"data-alliance\":colour,children:[withVal(match.match_meta[\"\".concat(colour,\"_alliance\")],function(a){return/*#__PURE__*/_jsxs(Card.Header,{children:[\"Alliance \",a]});}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(\"div\",{className:\"teams\",children:_this.renderAllianceTeams(colour)})})]})});})})]});};return _this;}return _createClass(AudienceSceneMatchPreview);}(BaseAudienceScene);export{AudienceSceneMatchPreview as default};","map":{"version":3,"names":["React","Card","Col","Row","withVal","ALLIANCES","AudienceCard","BaseAudienceScene","AudienceSceneMatchPreview","state","stations","teams","rankings","componentDidMount","handles","listen","renderAllianceTeams","colour","filter","s","station","alliance","map","team","find","t","id","name","affiliation","a","findIndex","r","undefined","show","match","props","details","event_name","match_meta"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/audience/MatchPreview.tsx"],"sourcesContent":["import React from \"react\";\nimport { Card, Col, Row } from \"react-bootstrap\";\nimport { withVal } from \"support/util\";\nimport { ALLIANCES } from \"support/ws-additional\";\nimport { SerialisedAllianceStation, LoadedMatch, Alliance, Team, TeamRanking } from \"ws-schema\";\nimport AudienceCard from \"./AudienceCard\";\nimport BaseAudienceScene from \"./BaseAudienceScene\";\n\ntype AudienceSceneMatchPreviewState = {\n  stations: SerialisedAllianceStation[],\n  match?: LoadedMatch,\n  teams: Team[],\n  rankings: TeamRanking[]\n};\n\nexport default class AudienceSceneMatchPreview extends BaseAudienceScene<{}, AudienceSceneMatchPreviewState> {\n  readonly state: AudienceSceneMatchPreviewState = {\n    stations: [],\n    teams: [],\n    rankings: []\n  };\n\n  componentDidMount = () => this.handles = [\n    this.listen(\"Arena/Alliance/CurrentStations\", \"stations\"),\n    this.listen(\"Arena/Match/Current\", \"match\"),\n    this.listen(\"Event/Team/CurrentAll\", \"teams\"),\n    this.listen(\"Event/Ranking/CurrentAll\", \"rankings\"),\n  ]\n  \n  renderAllianceTeams = (colour: Alliance) => {\n    const { stations, teams, rankings } = this.state;\n\n    return stations.filter(s => s.station.alliance == colour).map(s => withVal(s.team, () => {\n      return <Row className=\"team\">\n        <Col className=\"team-number\" sm={3}>\n          { s.team }\n        </Col>\n        <Col className=\"team-name\">\n          {\n            withVal(teams.find(t => t.id == s.team), t => <React.Fragment>\n              { t.name || t.affiliation }\n              {\n                withVal(t.affiliation, a => <React.Fragment>\n                  <span className=\"affiliation\">\n                    { t.affiliation }\n                  </span>\n                </React.Fragment>)\n              }\n            </React.Fragment>)\n          }\n        </Col>\n        <Col className=\"team-rank\" sm=\"auto\">\n          { \n            withVal(rankings.findIndex(r => r.team == s.team) + 1 || undefined, r => `#${r}`)\n          }\n        </Col>\n      </Row>\n    }))\n  }\n\n  show = () => {\n    const { match } = this.state;\n\n    if (match == null)\n      return <div className=\"audience-field\" />\n    else\n      return <AudienceCard event_name={this.props.details.event_name} className=\"audience-preview\">\n        <Row>\n          <Col className=\"audience-card-title\" md=\"auto\">\n            { match.match_meta.name }\n          </Col>\n          <Col className=\"preview-text\">\n            coming up\n          </Col>\n        </Row>\n\n        <Row className=\"match-teams\">\n          {\n            ALLIANCES.map(colour => <Col>\n              <Card data-alliance={colour}>\n                {\n                  withVal(match.match_meta[`${colour}_alliance`], a => <Card.Header>\n                    Alliance { a }\n                  </Card.Header>)\n                }\n                <Card.Body>\n                  <div className=\"teams\">\n                    { this.renderAllianceTeams(colour) }\n                  </div>\n                </Card.Body>\n              </Card>\n            </Col>)\n          }\n        </Row>\n      </AudienceCard>\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}