{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import moment from\"moment\";import React from\"react\";import{Col,Navbar}from\"react-bootstrap\";import{WebsocketComponent}from\"support/ws-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BottomNavbar=/*#__PURE__*/function(_WebsocketComponent){_inherits(BottomNavbar,_WebsocketComponent);var _super=_createSuper(BottomNavbar);function BottomNavbar(){var _this;_classCallCheck(this,BottomNavbar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={};_this.componentDidMount=function(){_this.handles=[_this.listen(\"Arena/Match/Current\",\"current_match\"),_this.listen(\"Match/Next\",\"next_match\"),_this.listen(\"Event/Details/Current\",\"event_details\")];};_this.getScheduleTimings=function(){// @ts-ignore\nvar format=function format(d){return d.format(\"d[d] h[h] m[m]\",{trim:\"both\"});};var nextMatch=_this.state.next_match;if(nextMatch===undefined||nextMatch===null||!!!nextMatch.start_time)return/*#__PURE__*/_jsx(React.Fragment,{});var now=moment();var match_time=moment.unix(nextMatch.start_time);var behind=now>match_time;if(behind)return/*#__PURE__*/_jsx(\"span\",{className:\"timekeeper-behind\",children:format(moment.duration(now.diff(match_time)))+\" BEHIND\"});else return/*#__PURE__*/_jsx(\"span\",{className:\"timekeeper-ahead\",children:format(moment.duration(match_time.diff(now)))+\" ahead\"});};return _this;}_createClass(BottomNavbar,[{key:\"render\",value:function render(){var _this$state$current_m,_this$state$current_m2,_this$state$event_det;return/*#__PURE__*/_jsxs(Navbar,{ref:this.props.innerRef,bg:\"dark\",variant:\"dark\",className:\"flex\",fixed:\"bottom\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Navbar.Brand,{children:((_this$state$current_m=this.state.current_match)===null||_this$state$current_m===void 0?void 0:(_this$state$current_m2=_this$state$current_m.match_meta)===null||_this$state$current_m2===void 0?void 0:_this$state$current_m2.name)||/*#__PURE__*/_jsx(\"i\",{children:\" No Match Loaded \"})})}),/*#__PURE__*/_jsx(Col,{className:\"text-center\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:this.getScheduleTimings()})}),/*#__PURE__*/_jsx(Col,{className:\"text-end\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:/*#__PURE__*/_jsx(\"i\",{children:(_this$state$event_det=this.state.event_details)===null||_this$state$event_det===void 0?void 0:_this$state$event_det.event_name})})})]});}}]);return BottomNavbar;}(WebsocketComponent);export{BottomNavbar as default};","map":{"version":3,"names":["moment","React","Col","Navbar","WebsocketComponent","BottomNavbar","state","componentDidMount","handles","listen","getScheduleTimings","format","d","trim","nextMatch","next_match","undefined","start_time","now","match_time","unix","behind","duration","diff","props","innerRef","current_match","match_meta","name","event_details","event_name"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/BottomNavbar.tsx"],"sourcesContent":["import moment from \"moment\";\nimport React from \"react\";\nimport { Col, Navbar } from \"react-bootstrap\";\nimport { WebsocketComponent } from \"support/ws-component\";\nimport { EventDetails, LoadedMatch, SerializedMatch } from \"ws-schema\";\n\ntype BottomNavbarState = {\n  event_details?: EventDetails,\n  current_match?: LoadedMatch,\n  next_match?: SerializedMatch\n}\n\nexport default class BottomNavbar extends WebsocketComponent<{ innerRef?: React.Ref<HTMLDivElement> }, BottomNavbarState> {\n  readonly state: BottomNavbarState = { };\n\n  componentDidMount = () => {\n    this.handles = [\n      this.listen(\"Arena/Match/Current\", \"current_match\"),\n      this.listen(\"Match/Next\", \"next_match\"),\n      this.listen(\"Event/Details/Current\", \"event_details\")\n    ]\n  }\n\n  getScheduleTimings = () => {\n    // @ts-ignore\n    let format = (d: moment.Duration) => d.format(\"d[d] h[h] m[m]\", { trim: \"both\" });\n\n    let nextMatch = this.state.next_match;\n\n    if (nextMatch === undefined || nextMatch === null || !!!nextMatch.start_time)\n      return <React.Fragment />;\n\n    let now = moment();\n    let match_time = moment.unix(nextMatch.start_time);\n\n    let behind = now > match_time;\n\n    if (behind)\n      return <span className={\"timekeeper-behind\"}>\n        { format(moment.duration(now.diff(match_time))) + \" BEHIND\" }\n      </span>\n    else\n      return <span className={ \"timekeeper-ahead\" }>\n        { format(moment.duration(match_time.diff(now))) + \" ahead\" }\n      </span>\n  }\n\n  render() {\n    return <Navbar ref={this.props.innerRef} bg=\"dark\" variant=\"dark\" className=\"flex\" fixed=\"bottom\">\n      <Col>\n        <Navbar.Brand>\n          { this.state.current_match?.match_meta?.name || <i> No Match Loaded </i> }\n        </Navbar.Brand>\n      </Col>\n      <Col className=\"text-center\">\n        <Navbar.Brand>\n          { this.getScheduleTimings() }\n        </Navbar.Brand>\n      </Col>\n      <Col className=\"text-end\">\n        <Navbar.Brand>\n          <i>\n            { this.state.event_details?.event_name }\n          </i>\n        </Navbar.Brand>\n      </Col>\n    </Navbar>\n  }\n}"],"mappings":"giBAAA,MAAOA,OAAP,KAAmB,QAAnB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,MAAd,KAA4B,iBAA5B,CACA,OAASC,kBAAT,KAAmC,sBAAnC,C,2FASqBC,a,qWACVC,K,CAA2B,E,OAEpCC,iB,CAAoB,UAAM,CACxB,MAAKC,OAAL,CAAe,CACb,MAAKC,MAAL,CAAY,qBAAZ,CAAmC,eAAnC,CADa,CAEb,MAAKA,MAAL,CAAY,YAAZ,CAA0B,YAA1B,CAFa,CAGb,MAAKA,MAAL,CAAY,uBAAZ,CAAqC,eAArC,CAHa,CAAf,CAKD,C,OAEDC,kB,CAAqB,UAAM,CACzB;AACA,GAAIC,OAAM,CAAG,QAATA,OAAS,CAACC,CAAD,QAAwBA,EAAC,CAACD,MAAF,CAAS,gBAAT,CAA2B,CAAEE,IAAI,CAAE,MAAR,CAA3B,CAAxB,EAAb,CAEA,GAAIC,UAAS,CAAG,MAAKR,KAAL,CAAWS,UAA3B,CAEA,GAAID,SAAS,GAAKE,SAAd,EAA2BF,SAAS,GAAK,IAAzC,EAAiD,CAAC,CAAC,CAACA,SAAS,CAACG,UAAlE,CACE,mBAAO,KAAC,KAAD,CAAO,QAAP,IAAP,CAEF,GAAIC,IAAG,CAAGlB,MAAM,EAAhB,CACA,GAAImB,WAAU,CAAGnB,MAAM,CAACoB,IAAP,CAAYN,SAAS,CAACG,UAAtB,CAAjB,CAEA,GAAII,OAAM,CAAGH,GAAG,CAAGC,UAAnB,CAEA,GAAIE,MAAJ,CACE,mBAAO,aAAM,SAAS,CAAE,mBAAjB,UACHV,MAAM,CAACX,MAAM,CAACsB,QAAP,CAAgBJ,GAAG,CAACK,IAAJ,CAASJ,UAAT,CAAhB,CAAD,CAAN,CAAgD,SAD7C,EAAP,CADF,IAKE,oBAAO,aAAM,SAAS,CAAG,kBAAlB,UACHR,MAAM,CAACX,MAAM,CAACsB,QAAP,CAAgBH,UAAU,CAACI,IAAX,CAAgBL,GAAhB,CAAhB,CAAD,CAAN,CAAgD,QAD7C,EAAP,CAGH,C,8DAED,iBAAS,wEACP,mBAAO,MAAC,MAAD,EAAQ,GAAG,CAAE,KAAKM,KAAL,CAAWC,QAAxB,CAAkC,EAAE,CAAC,MAArC,CAA4C,OAAO,CAAC,MAApD,CAA2D,SAAS,CAAC,MAArE,CAA4E,KAAK,CAAC,QAAlF,wBACL,KAAC,GAAD,wBACE,KAAC,MAAD,CAAQ,KAAR,WACI,6BAAKnB,KAAL,CAAWoB,aAAX,8FAA0BC,UAA1B,wEAAsCC,IAAtC,gBAA8C,wCADlD,EADF,EADK,cAML,KAAC,GAAD,EAAK,SAAS,CAAC,aAAf,uBACE,KAAC,MAAD,CAAQ,KAAR,WACI,KAAKlB,kBAAL,EADJ,EADF,EANK,cAWL,KAAC,GAAD,EAAK,SAAS,CAAC,UAAf,uBACE,KAAC,MAAD,CAAQ,KAAR,wBACE,0CACI,KAAKJ,KAAL,CAAWuB,aADf,gDACI,sBAA0BC,UAD9B,EADF,EADF,EAXK,GAAP,CAmBD,C,0BAvDuC1B,kB,SAArBC,Y"},"metadata":{},"sourceType":"module"}