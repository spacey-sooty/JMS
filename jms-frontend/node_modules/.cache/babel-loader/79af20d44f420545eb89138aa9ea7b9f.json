{"ast":null,"code":"import _objectSpread from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export function withVal(val,fn){if(val!==null&&val!==undefined)return fn(val);return null;}export function withValU(val,fn){if(val!==null&&val!==undefined)return fn(val);return undefined;}var inverse_alliance_map={blue:\"red\",red:\"blue\"};export function otherAlliance(alliance){return inverse_alliance_map[alliance];}export function interleave(arr,fn){return arr.flatMap(function(n){return[n,fn()];}).slice(0,-1);}export function unpackToData(obj){var data=flattenObj(obj);var out={};Object.keys(data).forEach(function(k){out[\"data-\".concat(k)]=data[k];});return out;}export function flattenObj(obj,prefix){var out={};Object.keys(obj).forEach(function(k){var v=obj[k];if(typeof v===\"object\"){out=_objectSpread(_objectSpread({},out),flattenObj(v,prefix?\"\".concat(prefix,\"-\").concat(String(k)):String(k)));}else{if(prefix!=null)out[\"\".concat(prefix,\"-\").concat(k)]=v;else out[k]=v;}});return out;}","map":{"version":3,"names":["withVal","val","fn","undefined","withValU","inverse_alliance_map","blue","red","otherAlliance","alliance","interleave","arr","flatMap","n","slice","unpackToData","obj","data","flattenObj","out","Object","keys","forEach","k","prefix","v","String"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/support/util.ts"],"sourcesContent":["import { Alliance } from \"ws-schema\";\n\nexport function withVal<T,R>(val: T|null|undefined, fn: (v: T) => R|null) {\n  if (val !== null && val !== undefined)\n    return fn(val)\n  return null\n}\n\nexport function withValU<T,R>(val: T|null|undefined, fn: (v: T) => R|undefined) {\n  if (val !== null && val !== undefined)\n    return fn(val)\n  return undefined\n}\n\nexport type Combine<A, B> = A & Omit<B, keyof A>;\nexport type VariantKeys<T> = T extends any ? keyof T : never;\n\nconst inverse_alliance_map: { [K in Alliance]: Alliance } = {\n  blue: \"red\",\n  red: \"blue\"\n};\n\nexport function otherAlliance(alliance: Alliance): Alliance {\n  return inverse_alliance_map[alliance];\n}\n\nexport function interleave<T>(arr: T[], fn: () => T): T[] {\n  return arr.flatMap(n => [n, fn()]).slice(0, -1);\n}\n\nexport function unpackToData(obj: any): { [k: string]: any } {\n  let data = flattenObj(obj);\n  let out: { [k: string]: any } = {};\n\n  Object.keys(data).forEach(k => {\n    out[`data-${k}`] = data[k];\n  })\n\n  return out;\n}\n\nexport function flattenObj(obj: any, prefix?: string): { [k: string]: any } {\n  let out: { [k: string]: any } = {};\n\n  Object.keys(obj).forEach(k => {\n    const v = obj[k];\n    if (typeof v === \"object\") {\n      out = { ...out, ...flattenObj(v, prefix ? `${prefix}-${String(k)}` : String(k)) }\n    } else {\n      if (prefix != null)\n        out[`${prefix}-${k}`] = v;\n      else\n        out[k] = v;\n    }\n  })\n\n  return out;\n}"],"mappings":"2IAEA,MAAO,SAASA,QAAT,CAAsBC,GAAtB,CAA6CC,EAA7C,CAAmE,CACxE,GAAID,GAAG,GAAK,IAAR,EAAgBA,GAAG,GAAKE,SAA5B,CACE,MAAOD,GAAE,CAACD,GAAD,CAAT,CACF,MAAO,KAAP,CACD,CAED,MAAO,SAASG,SAAT,CAAuBH,GAAvB,CAA8CC,EAA9C,CAAyE,CAC9E,GAAID,GAAG,GAAK,IAAR,EAAgBA,GAAG,GAAKE,SAA5B,CACE,MAAOD,GAAE,CAACD,GAAD,CAAT,CACF,MAAOE,UAAP,CACD,CAKD,GAAME,qBAAmD,CAAG,CAC1DC,IAAI,CAAE,KADoD,CAE1DC,GAAG,CAAE,MAFqD,CAA5D,CAKA,MAAO,SAASC,cAAT,CAAuBC,QAAvB,CAAqD,CAC1D,MAAOJ,qBAAoB,CAACI,QAAD,CAA3B,CACD,CAED,MAAO,SAASC,WAAT,CAAuBC,GAAvB,CAAiCT,EAAjC,CAAmD,CACxD,MAAOS,IAAG,CAACC,OAAJ,CAAY,SAAAC,CAAC,QAAI,CAACA,CAAD,CAAIX,EAAE,EAAN,CAAJ,EAAb,EAA4BY,KAA5B,CAAkC,CAAlC,CAAqC,CAAC,CAAtC,CAAP,CACD,CAED,MAAO,SAASC,aAAT,CAAsBC,GAAtB,CAAsD,CAC3D,GAAIC,KAAI,CAAGC,UAAU,CAACF,GAAD,CAArB,CACA,GAAIG,IAAyB,CAAG,EAAhC,CAEAC,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0B,SAAAC,CAAC,CAAI,CAC7BJ,GAAG,gBAASI,CAAT,EAAH,CAAmBN,IAAI,CAACM,CAAD,CAAvB,CACD,CAFD,EAIA,MAAOJ,IAAP,CACD,CAED,MAAO,SAASD,WAAT,CAAoBF,GAApB,CAA8BQ,MAA9B,CAAqE,CAC1E,GAAIL,IAAyB,CAAG,EAAhC,CAEAC,MAAM,CAACC,IAAP,CAAYL,GAAZ,EAAiBM,OAAjB,CAAyB,SAAAC,CAAC,CAAI,CAC5B,GAAME,EAAC,CAAGT,GAAG,CAACO,CAAD,CAAb,CACA,GAAI,MAAOE,EAAP,GAAa,QAAjB,CAA2B,CACzBN,GAAG,gCAAQA,GAAR,EAAgBD,UAAU,CAACO,CAAD,CAAID,MAAM,WAAMA,MAAN,aAAgBE,MAAM,CAACH,CAAD,CAAtB,EAA8BG,MAAM,CAACH,CAAD,CAA9C,CAA1B,CAAH,CACD,CAFD,IAEO,CACL,GAAIC,MAAM,EAAI,IAAd,CACEL,GAAG,WAAIK,MAAJ,aAAcD,CAAd,EAAH,CAAwBE,CAAxB,CADF,IAGEN,IAAG,CAACI,CAAD,CAAH,CAASE,CAAT,CACH,CACF,CAVD,EAYA,MAAON,IAAP,CACD"},"metadata":{},"sourceType":"module"}