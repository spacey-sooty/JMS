{"ast":null,"code":"import _classCallCheck from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/spacey_sooty/Documents/projects/JMS/jms-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import PlayoffBracketGraph,{as_playoffs}from\"components/PlayoffBracket\";import PlayoffDoubleBracketGraph from\"components/PlayoffDoubleBracket\";import PlayoffRoundRobin from\"components/PlayoffRoundRobin\";import moment from\"moment\";import React from\"react\";import{Col,Container,Row,Table}from\"react-bootstrap\";import{Element,scroller}from\"react-scroll\";import{WebsocketComponent}from\"support/ws-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SCROLL_TIME=20000;var SCROLL_RESET_TIME=2500;var Rankings=/*#__PURE__*/function(_WebsocketComponent){_inherits(Rankings,_WebsocketComponent);var _super=_createSuper(Rankings);function Rankings(){var _this;_classCallCheck(this,Rankings);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rankings:[]};_this.componentDidMount=function(){_this.handles=[_this.listen(\"Event/Ranking/CurrentAll\",\"rankings\"),_this.listen(\"Event/Details/Current\",\"event_details\"),_this.listen(\"Match/Playoffs/Generation\",\"playoffs\"),_this.listen(\"Match/Next\",\"next_match\")];if(_this.props.scroll)_this.scrollDown();};_this.scrollDown=function(){scroller.scrollTo(\"bottom\",{containerId:\"rankings-container\",duration:SCROLL_TIME,delay:0,smooth:'linear'});setTimeout(function(){scroller.scrollTo(\"top\",{containerId:\"rankings-container\",delay:0});setTimeout(function(){return _this.scrollDown();},SCROLL_RESET_TIME);},SCROLL_TIME+SCROLL_RESET_TIME);};_this.renderRankings=function(){var rankings=_this.state.rankings;return/*#__PURE__*/_jsxs(Table,{bordered:true,striped:true,className:\"rankings\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" Rank \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Team \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Played \"}),/*#__PURE__*/_jsx(\"th\",{children:\" RP \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Auto \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Teleop \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Endgame \"}),/*#__PURE__*/_jsx(\"th\",{children:\" Win-Loss-Tie \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rankings.map(function(r,i){return/*#__PURE__*/_jsxs(\"tr\",{\"data-rank\":i+1,children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",i+1,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.team,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.played,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.rp,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.auto_points,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.teleop_points,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.endgame_points,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.win,\" - \",r.loss,\" - \",r.tie,\" \"]})]});})})]});};return _this;}_createClass(Rankings,[{key:\"render\",value:function render(){var _playoffs$record;var _this$state=this.state,event_details=_this$state.event_details,rankings=_this$state.rankings,playoffs=_this$state.playoffs,next_match=_this$state.next_match;var playoff_data=as_playoffs(playoffs===null||playoffs===void 0?void 0:(_playoffs$record=playoffs.record)===null||_playoffs$record===void 0?void 0:_playoffs$record.data);return/*#__PURE__*/_jsxs(Container,{className:\"wrapper\",children:[/*#__PURE__*/_jsx(Row,{className:\"my-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" Team Standings - \",(event_details===null||event_details===void 0?void 0:event_details.event_name)||\"Unnamed Event\",\" \"]}),next_match?/*#__PURE__*/_jsxs(\"h4\",{className:\"text-muted\",children:[\"Next Match: \",next_match.name,\" \\xA0 (\",next_match.start_time?moment.unix(next_match.start_time).calendar():\"soon\",\")\"]}):/*#__PURE__*/_jsx(React.Fragment,{})]})}),/*#__PURE__*/_jsx(Row,{id:\"rankings-container\",className:\"app-viewport\",children:/*#__PURE__*/_jsxs(Col,{className:\"col-full\",children:[/*#__PURE__*/_jsx(Element,{name:\"top\"}),playoff_data?(playoff_data===null||playoff_data===void 0?void 0:playoff_data.mode)===\"Bracket\"?/*#__PURE__*/_jsx(PlayoffBracketGraph,{dark_mode:true,gen_record:playoffs,next:next_match}):(playoff_data===null||playoff_data===void 0?void 0:playoff_data.mode)===\"DoubleBracket\"?/*#__PURE__*/_jsx(PlayoffDoubleBracketGraph,{dark_mode:true,gen_record:playoffs,next:next_match}):/*#__PURE__*/_jsx(Row,{className:\"grow\",style:{fontSize:\"2.5vw\",maxHeight:\"80vh\"},children:/*#__PURE__*/_jsx(PlayoffRoundRobin,{dark_mode:true,gen_record:playoffs,next:next_match})}):rankings.length>0?this.renderRankings():/*#__PURE__*/_jsx(\"h4\",{children:\" No Rankings Available - waiting for matches to begin... \"}),/*#__PURE__*/_jsx(Element,{name:\"bottom\"})]})})]});}}]);return Rankings;}(WebsocketComponent);Rankings.defaultProps={scroll:true};export{Rankings as default};","map":{"version":3,"names":["PlayoffBracketGraph","as_playoffs","PlayoffDoubleBracketGraph","PlayoffRoundRobin","moment","React","Col","Container","Row","Table","Element","scroller","WebsocketComponent","SCROLL_TIME","SCROLL_RESET_TIME","Rankings","state","rankings","componentDidMount","handles","listen","props","scroll","scrollDown","scrollTo","containerId","duration","delay","smooth","setTimeout","renderRankings","map","r","i","team","played","rp","auto_points","teleop_points","endgame_points","win","loss","tie","event_details","playoffs","next_match","playoff_data","record","data","event_name","name","start_time","unix","calendar","mode","fontSize","maxHeight","length","defaultProps"],"sources":["/home/spacey_sooty/Documents/projects/JMS/jms-frontend/src/rankings/Rankings.tsx"],"sourcesContent":["import PlayoffBracketGraph, { as_playoffs } from \"components/PlayoffBracket\";\nimport PlayoffDoubleBracketGraph from \"components/PlayoffDoubleBracket\";\nimport PlayoffRoundRobin from \"components/PlayoffRoundRobin\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { Col, Container, Row, Table } from \"react-bootstrap\";\nimport { Element, scroller } from \"react-scroll\";\nimport { WebsocketComponent } from \"support/ws-component\";\nimport { EventDetails, SerialisedMatchGeneration, SerializedMatch, TeamRanking } from \"ws-schema\";\n\nconst SCROLL_TIME = 20000;\nconst SCROLL_RESET_TIME = 2500;\n\ntype RankingsProps = {\n  scroll: boolean\n};\n\ntype RankingsState = {\n  rankings: TeamRanking[],\n  event_details?: EventDetails,\n  playoffs?: SerialisedMatchGeneration,\n  next_match?: SerializedMatch\n}\n\nexport default class Rankings extends WebsocketComponent<RankingsProps, RankingsState> { \n  static defaultProps = {\n    scroll: true\n  };\n  \n  readonly state: RankingsState = {\n    rankings: []\n  };\n\n  componentDidMount = () => {\n    this.handles = [\n      this.listen(\"Event/Ranking/CurrentAll\", \"rankings\"),\n      this.listen(\"Event/Details/Current\", \"event_details\"),\n      this.listen(\"Match/Playoffs/Generation\", \"playoffs\"),\n      this.listen(\"Match/Next\", \"next_match\"),\n    ];\n    if (this.props.scroll)\n      this.scrollDown();\n  }\n\n  scrollDown = () => {\n    scroller.scrollTo(\"bottom\", {\n      containerId: \"rankings-container\",\n      duration: SCROLL_TIME,\n      delay: 0,\n      smooth: 'linear'\n    });\n\n    setTimeout(() => {\n      scroller.scrollTo(\"top\", {\n        containerId: \"rankings-container\",\n        delay: 0\n      });\n      setTimeout(() => this.scrollDown(), SCROLL_RESET_TIME);\n    }, SCROLL_TIME + SCROLL_RESET_TIME);\n  }\n\n  renderRankings = () => {\n    const { rankings } = this.state;\n    return <Table bordered striped className=\"rankings\">\n      <thead>\n        <tr>\n          <th> Rank </th>\n          <th> Team </th>\n          <th> Played </th>\n          <th> RP </th>\n          <th> Auto </th>\n          <th> Teleop </th>\n          <th> Endgame </th>\n          <th> Win-Loss-Tie </th>\n        </tr>\n      </thead>\n      <tbody>\n        {\n          rankings.map((r, i) => <tr data-rank={i + 1}>\n            <td> {i + 1} </td>\n            <td> { r.team } </td>\n            <td> { r.played } </td>\n            <td> { r.rp } </td>\n            <td> { r.auto_points } </td>\n            <td> { r.teleop_points } </td>\n            <td> { r.endgame_points } </td>\n            <td> { r.win } - { r.loss } - { r.tie } </td>\n          </tr>)\n        }\n      </tbody>\n    </Table>\n  }\n\n  render() {\n    const { event_details, rankings, playoffs, next_match } = this.state;\n    const playoff_data = as_playoffs(playoffs?.record?.data);\n\n    return <Container className=\"wrapper\">\n      <Row className=\"my-4\">\n        <Col>\n          <h2> Team Standings - { event_details?.event_name || \"Unnamed Event\" } </h2>\n          {\n            next_match ? <h4 className=\"text-muted\"> \n              Next Match: { next_match.name } &nbsp; ({ next_match.start_time ? moment.unix(next_match.start_time).calendar() : \"soon\" })\n            </h4> : <React.Fragment />\n          }\n        </Col>\n      </Row>\n      <Row id=\"rankings-container\" className=\"app-viewport\">\n        <Col className=\"col-full\">\n            <Element name=\"top\" />\n            {\n              playoff_data ? (\n                playoff_data?.mode === \"Bracket\"\n                  ? <PlayoffBracketGraph dark_mode gen_record={playoffs!} next={next_match} />\n                  : playoff_data?.mode === \"DoubleBracket\" ? <PlayoffDoubleBracketGraph dark_mode gen_record={playoffs!} next={next_match} />\n                  : <Row className=\"grow\" style={{ fontSize: \"2.5vw\", maxHeight: \"80vh\" }}>\n                      <PlayoffRoundRobin dark_mode gen_record={playoffs!} next={next_match} />\n                    </Row>\n              ) :\n              rankings.length > 0 ?\n                this.renderRankings()\n                : <h4> No Rankings Available - waiting for matches to begin... </h4>\n            }\n            <Element name=\"bottom\" />\n        </Col>\n      </Row>\n    </Container>\n  }\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}